package ch.makery.address.view;

import java.io.IOException;

import ch.makery.address.Main;
import ch.makery.address.view.employee.create.EmployeeCreateController;
import ch.makery.address.view.employees.overview.EmployeesOverviewController;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.control.SplitPane;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.FlowPane;
import javafx.scene.layout.GridPane;

public class MenuController {
	// Pantalla principal en la que se añade o quita contenido
		private BorderPane rootLayout;
		private Main main;
		
		 @FXML
		 private FlowPane inicio;
		
		@FXML
	    private void crear(ActionEvent event) {    	
	    	try {
				// Cargamos el archivo Controles Dinámicos
				FXMLLoader loader = new FXMLLoader();
				loader.setLocation(MenuController.class.getResource("employee/create/EmployeeCreate.fxml"));
				GridPane listadoControles = (GridPane) loader.load();

				// Se sitúa en el centro del diseño principal
				rootLayout.setCenter(listadoControles);
			} catch (IOException e) {
				e.printStackTrace();
			}
	    }

		@FXML
	    private void editar(ActionEvent event) {    	
	    	try {
				// Cargamos el archivo Controles Dinámicos
				FXMLLoader loader = new FXMLLoader();
				loader.setLocation(MenuController.class.getResource("employee/create/EmployeeCreate.fxml"));
				GridPane listadoControles = (GridPane) loader.load();

				EmployeeCreateController uc= loader.getController();
				
				uc.cambiarLabel("Modificar empleado", "Guardar");
				// Se sitúa en el centro del diseño principal
				rootLayout.setCenter(listadoControles);
			} catch (IOException e) {
				e.printStackTrace();
			}
	    }
		@FXML
	    private void verUsuarios(ActionEvent event) {    	
	    	try {
				// Cargamos el archivo Controles Dinámicos
				FXMLLoader loader = new FXMLLoader();
				loader.setLocation(MenuController.class.getResource("employees/overview/EmployeesOverview.fxml"));
				SplitPane listadoControles = (SplitPane) loader.load();
				
				EmployeesOverviewController eoc= loader.getController();
				
				eoc.setRoot(getRootLayout());

				// Se sitúa en el centro del diseño principal
				rootLayout.setCenter(listadoControles);
			} catch (IOException e) {
				e.printStackTrace();
			}
	    }
		@FXML
	    private void abrirTutorial(ActionEvent event) {    	
	    	main.abrirTutorial();
	    }
	    @FXML
	    private void cerrarListado(ActionEvent event) {    	
	    	// Se elimina el contenido del nodo central
	    	rootLayout.setCenter(inicio);	
	    }

		public BorderPane getRootLayout() {
			return rootLayout;
		}

		public void setRootLayout(BorderPane rootLayout) {
			this.rootLayout = rootLayout;
		}	

		
		public void setMain(Main main) {
			this.main = main;
		}

}
