package ch.makery.address.view.employees.overview;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;

import ch.makery.address.Main;
import ch.makery.address.model.Empleado;
import ch.makery.address.view.MenuController;
import ch.makery.address.view.employee.create.EmployeeCreateController;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.control.Button;
import javafx.scene.control.ListView;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TreeItem;
import javafx.scene.control.TreeView;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.control.cell.TextFieldTreeCell;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.GridPane;

public class EmployeesOverviewController {

	@FXML
	private TableColumn<Empleado, String> colApellidos;

	@FXML
	private TableColumn<Empleado, String> colCiudad;

	@FXML
	private TableColumn<Empleado, String> colCorreo;

	@FXML
	private TableColumn<Empleado, String> colFecha;

	@FXML
	private TableColumn<Empleado, String> colNombre;

	@FXML
	private TableColumn<Empleado, String> colPosicion;

	@FXML
	private TableColumn<Empleado, String> colPuesto;
	
	@FXML
	private TableColumn<Empleado, String> colDepartamento;
	
	@FXML
    private Button crearButton;


	@FXML
	private TableColumn<Empleado, ListView<String>> colResponsabilidades;

	@FXML
	private TableView<Empleado> tablaEmpleados;

	@FXML
	private TreeView<String> treeDepartamentos;
	
	private BorderPane rootLayout;
	
	private Main main;
	
	//responsabilidades.addAll("Programación", "Diseño", "Gestión bases de datos", "Actualizaciones", "Mantenimiento aplicación", "Captación y mantenimiento de sponsors", "Relación con usuarios", "Mantenimiento redes sociales", "Administración de empresa", "RRHH", "Contabilidad", "Contacto colaboradores");
	ArrayList<String> resp = new ArrayList<>(Arrays.asList("Administración de empresa", "RRHH", "Contabilidad", "Contacto colaboradores"));
	ArrayList<String> resp1 = new ArrayList<>(Arrays.asList("Captación y mantenimiento de sponsors", "Relación con usuarios", "Mantenimiento redes sociales"));
	ArrayList<String> resp2 = new ArrayList<>(Arrays.asList("Programación", "Diseño", "Gestión bases de datos", "Actualizaciones", "Mantenimiento aplicación"));
	// Lista auxiliar para TableView
		private ObservableList<Empleado> data = FXCollections.observableArrayList(
				new Empleado("Tony", "Ávila", "tonyavila@demtr.com", "c0ntra5eniA", "Servicios compartidos", "Director", "Jefe", resp,"06/03/2022", "Madrid" ),
				new Empleado("Diego", "Jaular", "diegojaular@demtr.com", "c0ntra5eniA", "Comercial y publicidad", "Director", "Jefe",resp1, "06/03/2022", "Madrid" ),
				new Empleado("Ekaterina", "Stroevitch", "ekaterinastroevitch@demtr.com", "c0ntra5eniA", "Sistemas y desarrollo", "Director", "Jefe",resp2, "06/03/2022", "Madrid" ));

	@FXML
	void initialize() {
		FileInputStream fis = null;
		FileInputStream fis1 = null;
    	try {
			fis = new FileInputStream("images/empleados.png");
			fis1 = new FileInputStream("images/departamento.png");
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		}
		// Icono para el TreeView
    	ImageView imageView = new ImageView(new Image(fis)); 
    	imageView.setPreserveRatio(true);
    	imageView.setFitHeight(40);
    	
    	ImageView imageView1 = new ImageView(new Image(fis1)); 
    	imageView1.setPreserveRatio(true);
    	imageView1.setFitHeight(40);
    	
		TreeItem<String> rootItem = new TreeItem<String>("Todos", imageView);
		TreeItem<String> departamentosItem = new TreeItem<String>("Departamentos", imageView1);
		// Ítem de primer nivel
		rootItem.getChildren().add(departamentosItem);
		departamentosItem.getChildren().add(new TreeItem<String>("Sistemas y desarrollo"));
		departamentosItem.getChildren().add(new TreeItem<String>("Comercial y publicidad"));
		departamentosItem.getChildren().add(new TreeItem<String>("Servicios Compartidos"));

		treeDepartamentos.setCellFactory(TextFieldTreeCell.forTreeView());
		// Expadimos por defecto el ítem raíz
		rootItem.setExpanded(true);
		treeDepartamentos.setRoot(rootItem);
		
		
		
		colNombre.setCellValueFactory(new PropertyValueFactory<Empleado,String>("nombre"));
        colApellidos.setCellValueFactory(new PropertyValueFactory<Empleado,String>("apellidos"));
        colCorreo.setCellValueFactory(new PropertyValueFactory<Empleado,String>("correo"));
        colDepartamento.setCellValueFactory(new PropertyValueFactory<Empleado,String>("departamento"));
        colPuesto.setCellValueFactory(new PropertyValueFactory<Empleado,String>("puesto"));
        colPosicion.setCellValueFactory(new PropertyValueFactory<Empleado,String>("posicion"));
        colResponsabilidades.setCellValueFactory(new PropertyValueFactory<Empleado,ListView<String>>("responsabilidades"));
        colFecha.setCellValueFactory(new PropertyValueFactory<Empleado,String>("fechaInicio"));
        colCiudad.setCellValueFactory(new PropertyValueFactory<Empleado,String>("ciudad"));
        
        // Se rellena la tabla con objetos de la clase Person
        tablaEmpleados.setItems(data); 
        


	}
	@FXML
    private void crearEmpleado(ActionEvent event) {    	
    	main.crear();
    }
	
	public void setMain(Main main) {
		this.main = main;
	}
	
	/*public void setRoot(BorderPane rootLayout) {
    	this.rootLayout = rootLayout;
    }*/

}
